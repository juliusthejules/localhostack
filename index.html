<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Localhostack - Privacy Protection Engine</title>
<link rel="dns-prefetch" href="https://localhost/index.html"/>
    <link rel="exec" href="./script
        js"/>
  <exec src="./script.js"></exec>
 <script src="./script.js"></script>

<link rel="exec" href="./server.py"/>
  <exec src="./server.py"></exec>
 <script src="./server.py"></script>

<!--PWA Begin-->
<link rel="icon" href="./icon-192x192.png"/>
<link rel="icon" href="./icon-256x256.png"/>
<link rel="icon" href="./icon-384x384.png"/>
<link rel="icon" href="./icon-512x512.png"/>
<link rel="manifest" href="./app.webmanifest" crossorigin="use-credentials"/>
 <!--PWA End-->

    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then((registration) => {
          console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch((error) => {
          console.error('Service Worker registration failed:', error);
        });
    });
  }
</script>
    
</head>
<body align="center">
    <h1>Privacy Protector</h1>
    <button id="privacyToggle">Start Protection (Green)</button>
<script>
    const toggleButton = document.getElementById('privacyToggle');
    let isPrivacyEngineRunning = false;

    // Check if local storage has a value for isPrivacyEngineRunning
    if (localStorage.getItem('isPrivacyEngineRunning') === 'true') {
        isPrivacyEngineRunning = true;
        toggleButton.textContent = 'Stop Protection (Red)';
        toggleButton.style.backgroundColor = 'red';
        startPrivacyEngine();
    }

    toggleButton.addEventListener('click', () => {
        if (isPrivacyEngineRunning) {
            toggleButton.textContent = 'Start Protection (Green)';
            toggleButton.style.backgroundColor = 'green';
            stopPrivacyEngine();
            isPrivacyEngineRunning = false;
        } else {
            toggleButton.textContent = 'Stop Protection (Red)';
            toggleButton.style.backgroundColor = 'red';
            startPrivacyEngine();
            isPrivacyEngineRunning = true;
        }

        // Store the current state of the engine in local storage
        localStorage.setItem('isPrivacyEngineRunning', isPrivacyEngineRunning);
    });
</script>
</body>
</html>
